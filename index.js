(()=>{(function(){"use strict";function u(t,i,s){var e,o;const n=t[i];return n?s>=((e=n.min)!=null?e:0)&&s<=((o=n.max)!=null?o:1/0):!0}const r=new WeakMap;function a(t){if(r.has(t))return r.get(t);const{constraints:i,cwidth:s}=t;return r.set(t,new Proxy(t,{get(n,e){return e==="fieldsets"?Object.fromEntries(Object.entries(n.fieldsets).filter(([o])=>u(i,o,s))):n[e]}})).get(t)}panel.plugin("rasteiner/conditionalblocks",{use:[function(t){const i=t.component("k-layout-field").options,s=t.component("k-layout-column").options;t.component("k-block-selector").options;const n=t.component("k-blocks").options;i.provide=function(){return{constraints:this.requires&&!Array.isArray(this.requires)?this.requires:{}}},i.props.requires={type:Object|Array,required:!1},s.provide=function(){const[e,o]=this.width.split("/");return{cwidth:parseInt(e)/parseInt(o)}},n.inject={constraints:{from:"constraints",default:{}},cwidth:{from:"cwidth",default:null}};for(const e of["choose","chooseToConvert"]){const o=n.methods[e];n.methods[e]=function(...c){if(Object.entries(this.constraints).length>0&&this.cwidth){const f=a(this);Reflect.apply(o,f,c)}else Reflect.apply(o,this,c)}}}]})})();})();
