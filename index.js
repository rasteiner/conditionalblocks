(()=>{(function(){"use strict";panel.plugin("rasteiner/conditionalblocks",{use:[function(n){const r=n.component("k-layout-field").options,a=r.components["k-block-layouts"].components["k-layout"].components["k-layout-column"],e=n.component("k-block-selector").options,c=n.component("k-blocks").options;n.component("k-layout-field",{extends:r,provide(){return{constraints:this.requires}},props:{requires:{type:Object,required:!1}}}),a.provide=function(){const[o,s]=this.width.split("/");return{cwidth:parseInt(o)/parseInt(s)}};const d=c.computed.draggableOptions;delete c.computed.draggableOptions,n.component("k-blocks",{extends:c,inject:["constraints","cwidth"],computed:{draggableOptions(){const o=d.call(this);return this.constraints&&this.cwidth&&(o.data.fieldsets=Object.fromEntries(Object.entries(o.data.fieldsets).filter(([s])=>{const t=this.constraints[s];return!((t==null?void 0:t.min)&&this.cwidth<t.min||(t==null?void 0:t.max)&&this.cwidth>t.max)}))),o}}}),e.inject=["constraints","cwidth"];const l=e.methods.open;e.methods.open=function(){if(l.call(this,...arguments),!this.constraints||!this.cwidth)return;const o=this.cwidth,s=Object.entries(this.constraints).filter(([t,i])=>i.min&&o<i.min||i.max&&o>i.max).map(([t,i])=>t);this.disabled=[...this.disabled,...s]}}]})})();})();
